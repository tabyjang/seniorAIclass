<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ë² ë„¤ì¹˜ì•„ ê²Œì„ - ì‹œë‹ˆì–´ íƒ€ì ì—°ìŠµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #16213e 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        /* í—¤ë” - í”„ë¦¬ë¯¸ì—„ ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ */
        .header {
            background: linear-gradient(135deg, rgba(212, 165, 44, 0.15) 0%, rgba(10, 14, 39, 0.8) 100%);
            backdrop-filter: blur(20px);
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid;
            border-image: linear-gradient(90deg, #D4A52C, #f4d03f, #D4A52C) 1;
            box-shadow: 0 4px 30px rgba(212, 165, 44, 0.3);
        }

        .header h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 50%, #f4d03f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(212, 165, 44, 0.5);
            letter-spacing: 2px;
        }

        .header-stats {
            display: flex;
            gap: 40px;
            font-size: 1.4rem;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(212, 165, 44, 0.3);
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            font-size: 1.6rem;
        }

        .lives {
            color: #ff6b6b;
            font-size: 1.8rem;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
            animation: heartbeat 2s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ê²Œì„ ë ˆì´ì•„ì›ƒ (ê²Œì„ + ì„¤ì • íŒ¨ë„) */
        .game-layout {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .game-section {
            flex: 1;
        }

        /* ì„¤ì • íŒ¨ë„ - í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒ€ì¼ */
        .settings-panel {
            width: 260px;
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%);
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            background-clip: padding-box;
            position: relative;
        }

        .settings-panel::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(135deg, #D4A52C, #f4d03f, #D4A52C);
            border-radius: 20px;
            z-index: -1;
        }

        .settings-panel h3 {
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            font-size: 1.2rem;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .setting-item {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(212, 165, 44, 0.2);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            display: block;
            color: #94a3b8;
            margin-bottom: 12px;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .setting-value {
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* ì†ë„ ìŠ¬ë¼ì´ë” - í”„ë¦¬ë¯¸ì—„ */
        .speed-slider {
            width: 100%;
            height: 10px;
            border-radius: 10px;
            background: linear-gradient(90deg, rgba(212, 165, 44, 0.2) 0%, rgba(212, 165, 44, 0.4) 100%);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(212, 165, 44, 0.6);
            border: 2px solid #fff;
            transition: transform 0.2s;
        }

        .speed-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .speed-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(212, 165, 44, 0.6);
        }

        /* ìƒëª… ì¡°ì ˆ ë²„íŠ¼ - í”„ë¦¬ë¯¸ì—„ */
        .lives-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .lives-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 12px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .lives-btn.minus {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            color: white;
        }

        .lives-btn.plus {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
        }

        .lives-btn:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .lives-btn:active {
            transform: scale(0.95);
        }

        .lives-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .lives-count {
            font-size: 1.8rem;
            color: #ff6b6b;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            min-width: 40px;
            text-align: center;
        }

        /* ê²Œì„ ì˜ì—­ - í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒ€ì¼ */
        .game-area {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(180deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.8) 100%);
            border: 3px solid transparent;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            background-clip: padding-box;
        }

        .game-area::before {
            content: '';
            position: absolute;
            top: -3px; left: -3px; right: -3px; bottom: -3px;
            background: linear-gradient(135deg, rgba(212, 165, 44, 0.5), rgba(244, 208, 63, 0.3), rgba(212, 165, 44, 0.5));
            border-radius: 20px;
            z-index: -1;
        }

        /* ë–¨ì–´ì§€ëŠ” ë‹¨ì–´ - ê¸€ë¡œìš° íš¨ê³¼ */
        .falling-word {
            position: absolute;
            font-size: 2.2rem;
            color: #f8fafc;
            font-weight: 800;
            text-shadow: 
                0 0 10px rgba(255, 255, 255, 0.8),
                0 0 20px rgba(212, 165, 44, 0.6),
                2px 2px 4px rgba(0, 0, 0, 0.8);
            padding: 12px 24px;
            background: rgba(15, 23, 42, 0.7);
            border: 2px solid rgba(212, 165, 44, 0.5);
            border-radius: 12px;
            will-change: top;
            transform: translateZ(0);
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .falling-word:hover {
            border-color: rgba(212, 165, 44, 0.9);
            box-shadow: 
                0 0 30px rgba(212, 165, 44, 0.5),
                0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .falling-word.danger {
            color: #ff6b6b;
            border-color: rgba(255, 107, 107, 0.8);
            text-shadow: 
                0 0 10px rgba(255, 107, 107, 0.8),
                0 0 20px rgba(255, 107, 107, 0.6);
            animation: dangerPulse 0.8s infinite;
        }

        @keyframes dangerPulse {
            0%, 100% { 
                transform: translateZ(0) scale(1);
                box-shadow: 0 0 20px rgba(255, 107, 107, 0.4);
            }
            50% { 
                transform: translateZ(0) scale(1.08);
                box-shadow: 0 0 40px rgba(255, 107, 107, 0.8);
            }
        }

        /* ë°”ë‹¥ì„  - ë„¤ì˜¨ íš¨ê³¼ */
        .bottom-line {
            position: absolute;
            bottom: 50px;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                #ff6b6b 20%, 
                #ff8787 50%, 
                #ff6b6b 80%, 
                transparent 100%);
            box-shadow: 
                0 0 20px #ff6b6b,
                0 0 40px rgba(255, 107, 107, 0.5);
            animation: lineGlow 2s infinite;
        }

        @keyframes lineGlow {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .bottom-label {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff6b6b;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.6);
            font-size: 0.9rem;
        }

        /* ì…ë ¥ ì˜ì—­ - í”„ë¦¬ë¯¸ì—„ */
        .input-area {
            margin: 25px 0;
            text-align: center;
        }

        #typingInput {
            width: 100%;
            max-width: 600px;
            padding: 22px 30px;
            font-size: 1.6rem;
            border: 3px solid transparent;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%);
            color: #f8fafc;
            text-align: center;
            outline: none;
            transition: all 0.3s;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            background-clip: padding-box;
            position: relative;
        }

        #typingInput::before {
            content: '';
            position: absolute;
            top: -3px; left: -3px; right: -3px; bottom: -3px;
            background: linear-gradient(135deg, #D4A52C, #f4d03f, #D4A52C);
            border-radius: 16px;
            z-index: -1;
        }

        #typingInput:focus {
            border-color: #D4A52C;
            box-shadow: 
                0 0 30px rgba(212, 165, 44, 0.4),
                0 10px 40px rgba(0, 0, 0, 0.4);
            transform: translateY(-2px);
        }

        #typingInput::placeholder {
            color: rgba(148, 163, 184, 0.7);
            font-weight: 500;
        }

        #typingInput:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            border-color: rgba(148, 163, 184, 0.3);
        }

        /* ë²„íŠ¼ - í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒ€ì¼ */
        .buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin: 25px 0;
        }

        button {
            padding: 18px 45px;
            font-size: 1.3rem;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-family: inherit;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        /* ë²„íŠ¼ ê¸€ë¡œìš° íš¨ê³¼ */
        button::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        .btn-start {
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 50%, #f4d03f 100%);
            color: #0f172a;
            box-shadow: 
                0 6px 25px rgba(212, 165, 44, 0.5),
                0 0 0 2px rgba(212, 165, 44, 0.3);
        }

        .btn-start:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 
                0 10px 40px rgba(212, 165, 44, 0.7),
                0 0 0 2px rgba(212, 165, 44, 0.5);
        }

        .btn-start:active {
            transform: scale(0.98);
        }

        .btn-restart {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 50%, #60a5fa 100%);
            color: white;
            display: none;
            box-shadow: 
                0 6px 25px rgba(59, 130, 246, 0.5),
                0 0 0 2px rgba(59, 130, 246, 0.3);
        }

        .btn-restart:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 
                0 10px 40px rgba(59, 130, 246, 0.7),
                0 0 0 2px rgba(59, 130, 246, 0.5);
        }

        .btn-home {
            background: transparent;
            color: #94a3b8;
            border: 2px solid rgba(148, 163, 184, 0.5);
            padding: 15px 35px;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .btn-home:hover {
            background: rgba(148, 163, 184, 0.1);
            border-color: #D4A52C;
            color: #D4A52C;
            box-shadow: 0 0 20px rgba(212, 165, 44, 0.3);
        }

        /* ê²Œì„ì˜¤ë²„ í™”ë©´ - í”„ë¦¬ë¯¸ì—„ */
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .game-over-content {
            text-align: center;
            padding: 50px 60px;
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%);
            border-radius: 24px;
            border: 3px solid transparent;
            background-clip: padding-box;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(212, 165, 44, 0.3);
            position: relative;
        }

        .game-over-content::before {
            content: '';
            position: absolute;
            top: -3px; left: -3px; right: -3px; bottom: -3px;
            background: linear-gradient(135deg, #D4A52C, #f4d03f, #ff6b6b, #D4A52C);
            border-radius: 24px;
            z-index: -1;
        }

        .game-over h2 {
            font-size: 3.5rem;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 50%, #ff6b6b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            text-shadow: 0 0 40px rgba(255, 107, 107, 0.5);
            letter-spacing: 3px;
        }

        .final-score {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #f4d03f 0%, #D4A52C 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 40px;
            font-weight: bold;
        }

        /* ë ˆë²¨ ì—… ì•Œë¦¼ - í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒ€ì¼ */
        .level-up-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            padding: 30px 50px;
            background: linear-gradient(145deg, rgba(212, 165, 44, 0.95) 0%, rgba(244, 208, 63, 0.95) 50%, rgba(212, 165, 44, 0.95) 100%);
            border-radius: 20px;
            text-align: center;
            z-index: 2000;
            box-shadow: 
                0 0 60px rgba(212, 165, 44, 0.8),
                0 20px 60px rgba(0, 0, 0, 0.5);
            animation: levelUpPop 2.5s ease-out forwards;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }

        @keyframes levelUpPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            20% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }
            30% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.9);
                opacity: 0;
            }
        }

        .level-up-notification .level-number {
            font-size: 4rem;
            font-weight: bold;
            color: #0f172a;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
        }

        .level-up-notification .level-text {
            font-size: 1.5rem;
            color: #0f172a;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .level-up-notification .level-desc {
            font-size: 1rem;
            color: rgba(15, 23, 42, 0.8);
        }

        /* íŒŒê´´ íš¨ê³¼ - ê¸€ë¡œìš° ì—…ê·¸ë ˆì´ë“œ */
        .destroy-effect {
            position: absolute;
            font-size: 1.6rem;
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            pointer-events: none;
            animation: destroyPop 0.6s ease-out forwards;
            text-shadow: 0 0 20px rgba(74, 222, 128, 0.8);
        }

        @keyframes destroyPop {
            0% {
                transform: scale(1);
                opacity: 1;
                filter: brightness(1);
            }
            50% {
                filter: brightness(1.5);
            }
            100% {
                transform: scale(1.8) translateY(-50px);
                opacity: 0;
                filter: brightness(2);
            }
        }

        /* íŒíŠ¸ - ë” ë‚˜ì€ ê°€ë…ì„± */
        .hint {
            text-align: center;
            color: rgba(148, 163, 184, 0.9);
            margin-top: 15px;
            font-size: 1rem;
            letter-spacing: 0.5px;
        }

        /* ë‚œì´ë„ ì„ íƒ - í”„ë¦¬ë¯¸ì—„ */
        .difficulty-selector {
            text-align: center;
            margin: 25px 0;
            padding: 15px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(212, 165, 44, 0.2);
        }

        .difficulty-selector label {
            font-size: 1.1rem;
            margin-right: 15px;
            color: #94a3b8;
            font-weight: 500;
        }

        .difficulty-selector select {
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 10px;
            border: 2px solid rgba(212, 165, 44, 0.5);
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.9) 100%);
            color: #f4d03f;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .difficulty-selector select:hover {
            border-color: #f4d03f;
            box-shadow: 0 0 20px rgba(212, 165, 44, 0.3);
        }

        .difficulty-selector select option {
            background: #0f172a;
            color: #e2e8f0;
        }

        /* ë°˜ì‘í˜• - í”„ë¦¬ë¯¸ì—„ */
        @media (max-width: 1100px) {
            .game-layout {
                flex-direction: column;
            }
            
            .settings-panel {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }

            .header h1 {
                font-size: 1.6rem;
                text-align: center;
            }
            
            .header-stats {
                font-size: 1.1rem;
                gap: 15px;
                width: 100%;
                justify-content: center;
            }

            .stat {
                padding: 8px 15px;
            }
            
            .game-area {
                height: 400px;
            }
            
            .falling-word {
                font-size: 1.6rem;
                padding: 8px 16px;
            }
            
            #typingInput {
                font-size: 1.3rem;
                padding: 18px 20px;
            }

            button {
                padding: 15px 30px;
                font-size: 1.1rem;
            }

            .game-over h2 {
                font-size: 2.5rem;
            }

            .final-score {
                font-size: 1.6rem;
            }

            .settings-panel {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.3rem;
            }

            .header-stats {
                font-size: 1rem;
                gap: 10px;
            }

            .stat {
                padding: 6px 12px;
            }

            .buttons {
                flex-direction: column;
                gap: 15px;
            }

            button {
                width: 100%;
                max-width: 280px;
            }

            .falling-word {
                font-size: 1.4rem;
            }
        }

        /* í”„ë¦¬ë¯¸ì—„ ë°°ê²½ ê¸€ë¡œìš° íš¨ê³¼ */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 165, 44, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #D4A52C, #f4d03f);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #f4d03f, #D4A52C);
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <h1>ğŸ® ë² ë„¤ì¹˜ì•„ ê²Œì„</h1>
        <div class="header-stats">
            <div class="stat">
                <span class="stat-label">ì ìˆ˜:</span>
                <span class="stat-value" id="scoreDisplay">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">ìƒëª…:</span>
                <span class="lives" id="livesDisplay">â™¥â™¥â™¥</span>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ë‚œì´ë„ ì„ íƒ -->
        <div class="difficulty-selector">
            <label for="difficulty">ë‚œì´ë„:</label>
            <select id="difficulty">
                <option value="easy">ğŸŒ± ì‰¬ì›€</option>
                <option value="medium" selected>ğŸŒ¿ ë³´í†µ</option>
                <option value="hard">ğŸŒ³ ì–´ë ¤ì›€</option>
            </select>
        </div>

        <!-- ê²Œì„ ë ˆì´ì•„ì›ƒ (ê²Œì„ + ì„¤ì • íŒ¨ë„) -->
        <div class="game-layout">
            <!-- ê²Œì„ ì„¹ì…˜ -->
            <div class="game-section">
                <!-- ê²Œì„ ì˜ì—­ -->
                <div class="game-area" id="gameArea">
                    <div class="bottom-line"></div>
                    <div class="bottom-label">âš ï¸ ë°”ë‹¥ì— ë‹¿ìœ¼ë©´ ìƒëª…ì´ ê°ì†Œí•©ë‹ˆë‹¤</div>
                </div>

                <!-- ì…ë ¥ ì˜ì—­ -->
                <div class="input-area">
                    <input 
                        type="text" 
                        id="typingInput" 
                        placeholder="ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ê³  Enterë¥¼ ëˆ„ë¥´ì„¸ìš”..." 
                        disabled
                        autocomplete="off"
                    >
                    <p class="hint">ğŸ’¡ í™”ë©´ì˜ ë‹¨ì–´ì™€ ë˜‘ê°™ì´ ì…ë ¥í•˜ë©´ íŒŒê´´ë©ë‹ˆë‹¤!</p>
                </div>
            </div>

            <!-- ì„¤ì • íŒ¨ë„ -->
            <div class="settings-panel">
                <h3>âš™ï¸ ê²Œì„ ì„¤ì •</h3>
                
                <!-- ì†ë„ ì¡°ì ˆ -->
                <div class="setting-item">
                    <label class="setting-label">
                        ë‹¨ì–´ ì†ë„: <span class="setting-value" id="speedValue">ë³´í†µ</span>
                    </label>
                    <input 
                        type="range" 
                        class="speed-slider" 
                        id="speedSlider"
                        min="0.5" 
                        max="8" 
                        step="0.5" 
                        value="2.5"
                    >
                    <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.8rem; color: rgba(255,255,255,0.6);">
                        <span>ëŠë¦¼</span>
                        <span>ë¹ ë¦„</span>
                    </div>
                </div>

                <!-- ìƒëª… ì¡°ì ˆ -->
                <div class="setting-item">
                    <label class="setting-label">ì‹œì‘ ìƒëª…:</label>
                    <div class="lives-control">
                        <button class="lives-btn minus" id="livesMinus" onclick="adjustLives(-1)">âˆ’</button>
                        <span class="lives-count" id="settingsLives">3</span>
                        <button class="lives-btn plus" id="livesPlus" onclick="adjustLives(1)">+</button>
                    </div>
                    <p style="font-size: 0.8rem; color: rgba(255,255,255,0.5); margin-top: 8px;">
                        â™¥ ìµœëŒ€ 10ê°œ, ìµœì†Œ 1ê°œ
                    </p>
                </div>

                <!-- í˜„ì¬ ì„¤ì • í‘œì‹œ -->
                <div class="setting-item" style="background: rgba(212, 165, 44, 0.1); padding: 10px; border-radius: 8px;">
                    <label class="setting-label" style="margin-bottom: 5px;">í˜„ì¬ ì ìš©ê°’:</label>
                    <div style="font-size: 0.9rem; color: white;">
                        ì†ë„: <span id="currentSpeed">2.5</span> px/í”„ë ˆì„<br>
                        ìƒëª…: <span id="currentLives">3</span> ê°œ
                    </div>
                </div>
            </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="buttons">
            <button class="btn-start" id="startBtn" onclick="startGame()">ğŸš€ ê²Œì„ ì‹œì‘</button>
            <button class="btn-restart" id="restartBtn" onclick="resetGame()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
            <button class="btn-home" onclick="location.href='index.html'">â† ë©”ì¸ìœ¼ë¡œ</button>
        </div>
    </div>

    <!-- ê²Œì„ì˜¤ë²„ í™”ë©´ -->
    <div class="game-over" id="gameOverScreen">
        <div class="game-over-content">
            <h2>ê²Œì„ ì˜¤ë²„!</h2>
            <div class="final-score">
                ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span>
            </div>
            <button class="btn-start" onclick="resetGame()" style="display: inline-block;">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script>
        // ==========================================
        // Phase 1: ë°ì´í„° ì¤€ë¹„ - 1ê¸€ì â†’ 2ê¸€ì â†’ 3ê¸€ì ìˆœì„œ
        // ==========================================
        
        // ğŸ¯ 1ê¸€ì ë‹¨ì–´ (50ê°œ)
        // ë°›ì¹¨ ì—†ëŠ” ê²ƒë“¤ + ë°›ì¹¨ ìˆëŠ” ê²ƒë“¤ ì„ì—¬ ìˆìŒ
        const words_1char = [
            // ë°›ì¹¨ ì—†ëŠ” í•œê¸€ì (ì‰¬ì›€)
            "ê°€", "ë‚˜", "ë‹¤", "ë¼", "ë§ˆ", "ë°”", "ì‚¬", "ì•„", "ì", "ì°¨",
            "ê±°", "ë„ˆ", "ë”", "ëŸ¬", "ë¨¸", "ë²„", "ì„œ", "ì–´", "ì €", "ì²˜",
            "ê³ ", "ë…¸", "ë„", "ë¡œ", "ëª¨", "ë³´", "ì†Œ", "ì˜¤", "ì¡°", "ì´ˆ",
            // ë°›ì¹¨ ìˆëŠ” í•œê¸€ì (ì–´ë ¤ì›€)
            "ê°", "ê°„", "ê°", "ê°’", "ê°•", "ê°œ", "ê°", "ê±°", "ê±´", "ê²€",
            "ê³¡", "ê³¤", "ê³°", "ê³µ", "ê³¼", "ê´€", "êµ", "êµ¬", "êµ­", "êµ°"
        ];

        // ğŸ¯ 2ê¸€ì ë‹¨ì–´ (ì‚¬ì „ ë‹¨ì–´ 50ê°œ)
        const words_2char = [
            // ë°›ì¹¨ ì—†ëŠ” ë‘ê¸€ì (ì‰¬ì›€)
            "ì‚¬ê³¼", "ë°”ë‹¤", "í•˜ëŠ˜", "ìš°ìœ ", "ì•„ê¸°", "ì–´ë¨¸", "ì˜¤ì´", "ì•¼êµ¬", "ì—¬ìš°", "ìš”ë¦¬",
            "ì´ëª¨", "ì•„ë¹ ", "ì˜¤ë¹ ", "ì˜ì", "ì˜ˆì•½", "ì˜ë£Œ", "ì—¬ê°€", "ìš”ê°€", "ìœ ì•„", "ìœ ë¦¬",
            // ë°›ì¹¨ ìˆëŠ” ë‘ê¸€ì (ì–´ë ¤ì›€)
            "í•œêµ­", "í•™êµ", "ì±…ìƒ", "ì „í™”", "í•œê¸€", "ì§‘ì•ˆ", "ê°€ë°©", "ê³µë¶€", "ë°©ë²•", "ì •ë‹µ",
            "ìƒê°", "ë°©ë¬¸", "ê°•ì˜", "íšŒì˜", "ì •ë¦¬", "ì¤€ë¹„", "ë°©ì†¡", "ì˜í™”", "ì¼ë³¸", "ë¯¸êµ­",
            // ì„ì¸ ë‘ê¸€ì
            "ì»´í“¨í„°", "í•œì •", "ì •ì›", "ì›ë¦¬", "ì˜ì›", "ì˜ê²¬", "í•´ë‹µ", "ë‹µì•ˆ", "ì•ˆì „", "ì „ì¥"
        ];

        // ğŸ¯ 3ê¸€ì ë‹¨ì–´ (ì‚¬ì „ ë‹¨ì–´ 40ê°œ)
        const words_3char = [
            // ë°›ì¹¨ ì—†ëŠ” ì„¸ê¸€ì (ì‰¬ì›€)
            "ë°”ë‚˜ë‚˜", "í† ë§ˆí† ", "ì¹´ë©”ë¼", "ì•„ì´ìœ ", "ì˜¤ë””ì˜¤", "ë¹„ë””ì˜¤", "ë¼ë””ì˜¤", "ì´ë©”ì¼", "ì¹´ì¹´ì˜¤", "ë„¤ì´ë²„",
            // ë°›ì¹¨ ìˆëŠ” ì„¸ê¸€ì (ì–´ë ¤ì›€)
            "ì „í™”ê¸°", "í•™ìƒë“¤", "í•œêµ­ì¸", "ì»´í“¨í„°", "ì„ ìƒë‹˜", "í•™êµìƒ", "ì±…ìƒìœ„", "ì˜ìì—", "ë°©ë²•ë¡ ", "ì •ë‹µì€",
            "ìƒê°í•´", "ë°©ë¬¸ì", "íšŒì˜ë¡", "ì¤€ë¹„ë¬¼", "ë°©ì†¡êµ­", "ì˜í™”ê´€", "ë¯¸êµ­ì¸", "ì¤‘êµ­ì–´", "ì˜êµ­ì¸", "ì •ì›ì‚¬",
            "ì›ë¦¬ëŠ”", "ì˜ì›íšŒ", "ì˜ê²¬ì„œ", "í•´ë‹µì„", "ë‹µì•ˆì§€", "ì•ˆì „í•œ", "ì „ì¥ì—", "ì¥ì†ŒëŠ”", "ì†Œë¦¬ê°€", "ë¦¬ë“¬ì´",
            "ì„±ì¥ì€", "ì¥ë˜ì˜", "ì¼ìƒì€", "ìƒìƒë ¥", "ìƒë‹´ì‹¤", "ë‹´ë‹¹ì", "ë‹¹ì‹ ì€", "ì‹ ë°œì„", "ë°œì „ì€", "ì „ì§„í•´"
        ];

        // ==========================================
        // ê²Œì„ ë ˆë²¨ ì‹œìŠ¤í…œ (ë™ì¼ ë¹„ìœ¨ ì„ê¸°)
        // ==========================================
        
        // ë ˆë²¨ë³„ ë‹¨ì–´ ì„ íƒ í•¨ìˆ˜
        function getWordForLevel(level) {
            const rand = Math.random();
            
            if (level === 1) {
                // ë ˆë²¨ 1: 1ê¸€ì 100%
                return words_1char[Math.floor(Math.random() * words_1char.length)];
                
            } else if (level === 2) {
                // ë ˆë²¨ 2: 1ê¸€ì 50% + 2ê¸€ì 50%
                if (rand < 0.5) {
                    return words_1char[Math.floor(Math.random() * words_1char.length)];
                } else {
                    return words_2char[Math.floor(Math.random() * words_2char.length)];
                }
                
            } else if (level >= 3) {
                // ë ˆë²¨ 3+: 1ê¸€ì 33% + 2ê¸€ì 33% + 3ê¸€ì 33%
                if (rand < 0.33) {
                    return words_1char[Math.floor(Math.random() * words_1char.length)];
                } else if (rand < 0.67) {
                    return words_2char[Math.floor(Math.random() * words_2char.length)];
                } else {
                    return words_3char[Math.floor(Math.random() * words_3char.length)];
                }
            }
        }

        // ê²Œì„ ì§„í–‰ ìƒí™œì— ë”°ë¥¸ ë ˆë²¨ ê³„ì‚°
        function calculateLevel(score, wordsDestroyed) {
            // ì²˜ìŒ 500ì : ë ˆë²¨ 1 (1ê¸€ìë§Œ)
            if (score < 500) return 1;
            
            // 500~1500ì : ë ˆë²¨ 2 (1ê¸€ì 50% + 2ê¸€ì 50%)
            if (score < 1500) return 2;
            
            // 1500ì  ì´ìƒ: ë ˆë²¨ 3 (1:1:1 ë¹„ìœ¨)
            return 3;
        }

        // ë ˆë²¨ê³¼ ì ìˆ˜ì— ë”°ë¥¸ ì†ë„ ê³„ì‚° (ì ì§„ì  ê°€ì†)
        function calculateSpeed(level, score) {
            let baseSpeed = gameSettings.wordSpeed;
            let multiplier = 1.0;
            
            if (level === 2) {
                // ë ˆë²¨ 2: 500ì ë§ˆë‹¤ 0.1ì”© ì¦ê°€ (ìµœëŒ€ 2.0)
                const bonus = Math.floor((score - 500) / 500) * 0.1;
                multiplier += Math.min(bonus, 2.0);
            } else if (level >= 3) {
                // ë ˆë²¨ 3+: 1000ì ë§ˆë‹¤ 0.2ì”© ì¦ê°€ (ìµœëŒ€ 3.0)
                const bonus = Math.floor((score - 1500) / 1000) * 0.2;
                multiplier += Math.min(bonus, 3.0);
            }
            
            return baseSpeed * multiplier;
        }

        // ë‹¨ì–´ ë°ì´í„° (í•˜ìœ„í˜¸í™˜ìš©)
        const wordData = {
            stage1: words_1char,
            stage2: words_1char,  // ë ˆë²¨ 2ë„ 1ê¸€ì ì‚¬ìš©
            stage3: words_2char,
            stage4: words_3char
        };

        // ê²Œì„ ì„¤ì •
        const GAME_CONFIG = {
            GAME_AREA_HEIGHT: 500,
            GAME_AREA_WIDTH: 1000,
            BOTTOM_MARGIN: 50,
            SPAWN_INTERVAL_EASY: 2500,    // 2.5ì´ˆ
            SPAWN_INTERVAL_MEDIUM: 1800,  // 1.8ì´ˆ
            SPAWN_INTERVAL_HARD: 1200,    // 1.2ì´ˆ
            WORD_SPEED_EASY: 1.5,         // px/frame (60fps ê¸°ì¤€)
            WORD_SPEED_MEDIUM: 2.5,
            WORD_SPEED_HARD: 4.0,
            INITIAL_LIVES: 3,
            SCORE_PER_CHAR: 100
        };

        // ==========================================
        // Phase 3: í´ë˜ìŠ¤ ë° ìƒíƒœ ê´€ë¦¬
        // ==========================================
        
        // Word í´ë˜ìŠ¤
        class Word {
            constructor(text, x, speed) {
                this.text = text;
                this.x = x;
                this.y = 0;
                this.speed = speed;
                this.element = null;
                this.width = 0;
            }
            
            update() {
                this.y += this.speed;
            }
            
            createElement() {
                this.element = document.createElement('div');
                this.element.className = 'falling-word';
                this.element.textContent = this.text;
                this.element.style.left = `${this.x}px`;
                this.element.style.top = `${this.y}px`;
                
                // ë°”ë‹¥ ê·¼ì²˜ë©´ danger í´ë˜ìŠ¤ ì¶”ê°€
                const gameArea = document.getElementById('gameArea');
                const dangerZone = gameArea.clientHeight - GAME_CONFIG.BOTTOM_MARGIN - 100;
                
                if (this.y > dangerZone) {
                    this.element.classList.add('danger');
                }
                
                return this.element;
            }
            
            render() {
                if (this.element) {
                    this.element.style.top = `${this.y}px`;
                    
                    // ë°”ë‹¥ ê·¼ì²˜ ì²´í¬
                    const gameArea = document.getElementById('gameArea');
                    const dangerZone = gameArea.clientHeight - GAME_CONFIG.BOTTOM_MARGIN - 100;
                    
                    if (this.y > dangerZone && !this.element.classList.contains('danger')) {
                        this.element.classList.add('danger');
                    }
                }
            }
            
            destroy() {
                if (this.element && this.element.parentNode) {
                    this.element.parentNode.removeChild(this.element);
                }
            }
        }

        // ê²Œì„ ìƒíƒœ (ë ˆë²¨ ì‹œìŠ¤í…œ ì¶”ê°€)
        let gameState = {
            isPlaying: false,
            score: 0,
            lives: 3,
            level: 1,                    // í˜„ì¬ ë ˆë²¨ (1, 2, 3)
            words: [],
            lastSpawnTime: 0,
            animationId: null,
            difficulty: 'medium',
            baseSpeed: 1.0,              // ë ˆë²¨ 1 ê¸°ë³¸ ì†ë„
            currentSpeedMultiplier: 1.0  // ì ìˆ˜ì— ë”°ë¥¸ ì†ë„ ë°°ìœ¨
        };

        // DOM ìš”ì†Œ ì°¸ì¡°
        const elements = {
            gameArea: document.getElementById('gameArea'),
            scoreDisplay: document.getElementById('scoreDisplay'),
            livesDisplay: document.getElementById('livesDisplay'),
            typingInput: document.getElementById('typingInput'),
            startBtn: document.getElementById('startBtn'),
            restartBtn: document.getElementById('restartBtn'),
            gameOverScreen: document.getElementById('gameOverScreen'),
            finalScore: document.getElementById('finalScore'),
            difficulty: document.getElementById('difficulty'),
            speedSlider: document.getElementById('speedSlider'),
            speedValue: document.getElementById('speedValue'),
            settingsLives: document.getElementById('settingsLives'),
            currentSpeed: document.getElementById('currentSpeed'),
            currentLives: document.getElementById('currentLives'),
            livesMinus: document.getElementById('livesMinus'),
            livesPlus: document.getElementById('livesPlus')
        };

        // ì„¤ì •ê°’ (ì‚¬ìš©ìê°€ ì¡°ì ˆ ê°€ëŠ¥)
        let gameSettings = {
            wordSpeed: 2.5,  // ìŠ¬ë¼ì´ë” ê°’ (px/frame)
            initialLives: 3  // ì‹œì‘ ìƒëª…
        };

        // ==========================================
        // ì„¤ì • íŒ¨ë„ ê¸°ëŠ¥
        // ==========================================

        // ì†ë„ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        elements.speedSlider.addEventListener('input', function() {
            const speed = parseFloat(this.value);
            gameSettings.wordSpeed = speed;
            
            // ì†ë„ í‘œì‹œ ì—…ë°ì´íŠ¸
            let speedText;
            if (speed <= 1.5) speedText = 'ë§¤ìš° ëŠë¦¼';
            else if (speed <= 2.5) speedText = 'ëŠë¦¼';
            else if (speed <= 3.5) speedText = 'ë³´í†µ';
            else if (speed <= 5) speedText = 'ë¹ ë¦„';
            else speedText = 'ë§¤ìš° ë¹ ë¦„';
            
            elements.speedValue.textContent = speedText;
            elements.currentSpeed.textContent = speed;
            
            // ê²Œì„ ì¤‘ì´ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì ìš© (ê¸°ì¡´ ë‹¨ì–´ëŠ” ì œì™¸, ìƒˆ ë‹¨ì–´ë¶€í„°)
            if (gameState.isPlaying) {
                // ìƒˆë¡œ ìƒì„±ë˜ëŠ” ë‹¨ì–´ì—ë§Œ ì ìš©ë¨
            }
        });

        // ìƒëª… ì¡°ì ˆ í•¨ìˆ˜
        function adjustLives(delta) {
            const newLives = gameSettings.initialLives + delta;
            
            // ìµœì†Œ 1, ìµœëŒ€ 10 ì œí•œ
            if (newLives >= 1 && newLives <= 10) {
                gameSettings.initialLives = newLives;
                elements.settingsLives.textContent = newLives;
                elements.currentLives.textContent = newLives;
                
                // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                elements.livesMinus.disabled = (newLives <= 1);
                elements.livesPlus.disabled = (newLives >= 10);
                
                // ê²Œì„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ í˜„ì¬ ìƒëª…ë„ ì—…ë°ì´íŠ¸
                if (!gameState.isPlaying) {
                    gameState.lives = newLives;
                    updateLivesDisplay();
                }
            }
        }

        // ì´ˆê¸° ë²„íŠ¼ ìƒíƒœ ì„¤ì •
        elements.livesMinus.disabled = (gameSettings.initialLives <= 1);
        elements.livesPlus.disabled = (gameSettings.initialLives >= 10);

        // ==========================================
        // Phase 3: ê²Œì„ ì—”ì§„ êµ¬í˜„
        // ==========================================
        
        // ë‹¨ì–´ ìƒì„± (ë ˆë²¨ ì‹œìŠ¤í…œ ì ìš©)
        function spawnWord() {
            // í˜„ì¬ ë ˆë²¨ ê³„ì‚°
            const currentLevel = calculateLevel(gameState.score);
            
            // ë ˆë²¨ ë³€ê²½ ì‹œ ì•Œë¦¼
            if (currentLevel !== gameState.level) {
                gameState.level = currentLevel;
                showLevelUpNotification(currentLevel);
            }
            
            // ë ˆë²¨ì— ë”°ë¥¸ ë‹¨ì–´ ì„ íƒ
            const wordText = getWordForLevel(currentLevel);
            
            // ê²Œì„ ì˜ì—­ ë„ˆë¹„ ê°€ì ¸ì˜¤ê¸°
            const gameWidth = elements.gameArea.clientWidth;
            const maxX = gameWidth - 150; // ë‹¨ì–´ ë„ˆë¹„ ê³ ë ¤
            const randomX = Math.random() * maxX;
            
            // ë ˆë²¨ê³¼ ì ìˆ˜ì— ë”°ë¥¸ ì†ë„ ê³„ì‚° (ì‚¬ìš©ì ì„¤ì • Ã— ë ˆë²¨ ë°°ìœ¨)
            const speed = calculateSpeed(currentLevel, gameState.score);
            
            const word = new Word(wordText, randomX, speed);
            const wordElement = word.createElement();
            elements.gameArea.appendChild(wordElement);
            
            // ë„ˆë¹„ ê³„ì‚° (ì¤‘ë³µ ë°©ì§€ìš©)
            word.width = wordElement.offsetWidth;
            
            gameState.words.push(word);
        }

        // ëª¨ë“  ë‹¨ì–´ ì—…ë°ì´íŠ¸
        function updateWords() {
            gameState.words.forEach(word => {
                word.update();
                word.render();
            });
        }

        // ë°”ë‹¥ ì¶©ëŒ ì²´í¬
        function checkBottomCollision() {
            const gameAreaHeight = elements.gameArea.clientHeight;
            const bottomY = gameAreaHeight - GAME_CONFIG.BOTTOM_MARGIN;
            
            for (let i = gameState.words.length - 1; i >= 0; i--) {
                const word = gameState.words[i];
                
                if (word.y >= bottomY) {
                    // ë‹¨ì–´ ì œê±°
                    word.destroy();
                    gameState.words.splice(i, 1);
                    
                    // ìƒëª… ê°ì†Œ
                    loseLife();
                }
            }
        }

        // ìƒëª… ê°ì†Œ
        function loseLife() {
            gameState.lives--;
            updateLivesDisplay();
            
            // í™”ë©´ í”ë“¤ë¦¼ íš¨ê³¼
            elements.gameArea.style.animation = 'shake 0.5s';
            setTimeout(() => {
                elements.gameArea.style.animation = '';
            }, 500);
            
            if (gameState.lives <= 0) {
                gameOver();
            }
        }

        // ìƒëª… UI ì—…ë°ì´íŠ¸
        function updateLivesDisplay() {
            const maxLives = Math.max(gameSettings.initialLives, gameState.lives);
            const hearts = 'â™¥'.repeat(gameState.lives) + 'â™¡'.repeat(maxLives - gameState.lives);
            elements.livesDisplay.textContent = hearts;
        }

        // ë ˆë²¨ ì—… ì•Œë¦¼ í‘œì‹œ
        function showLevelUpNotification(level) {
            const notification = document.createElement('div');
            notification.className = 'level-up-notification';
            
            let desc = '';
            if (level === 2) {
                desc = 'ë‘ê¸€ì ë‹¨ì–´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤!';
            } else if (level === 3) {
                desc = 'ì„¸ê¸€ì ë‹¨ì–´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!';
            } else {
                desc = 'ëª¨ë“  ê¸€ì ë‹¨ì–´ê°€ ë“±ì¥í•©ë‹ˆë‹¤!';
            }
            
            notification.innerHTML = `
                <div class="level-number">Level ${level}</div>
                <div class="level-text">ë ˆë²¨ ì—…!</div>
                <div class="level-desc">${desc}</div>
            `;
            
            document.body.appendChild(notification);
            
            // 2.5ì´ˆ í›„ ì œê±°
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 2500);
        }
            const maxLives = Math.max(gameSettings.initialLives, gameState.lives);
            const hearts = 'â™¥'.repeat(gameState.lives) + 'â™¡'.repeat(maxLives - gameState.lives);
            elements.livesDisplay.textContent = hearts;
        }

        // ==========================================
        // Phase 4: ì…ë ¥ ë° íŒŒê´´ (í•œê¸€ ì…ë ¥ ë¬¸ì œ í•´ê²°)
        // ==========================================
        
        // ì…ë ¥ ì²˜ë¦¬ - Enter í‚¤ + ì •ê·œí™” ë°©ì‹
        function handleInput(event) {
            // Enter í‚¤ë§Œ ì²˜ë¦¬
            if (event.key !== 'Enter') return;
            
            if (!gameState.isPlaying) return;
            
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸° ë° ì •ê·œí™” (í•œê¸€ ì…ë ¥ ë¬¸ì œ í•´ê²°!)
            let input = elements.typingInput.value.trim();
            
            // ğŸ”‘ í•µì‹¬: í•œê¸€ ì •ê·œí™” (NFC ë°©ì‹ìœ¼ë¡œ í†µì¼)
            input = input.normalize('NFC');
            
            if (!input) return;
            
            // í™”ë©´ì— ìˆëŠ” ë‹¨ì–´ ì¤‘ ì¼ì¹˜í•˜ëŠ” ê²ƒ ì°¾ê¸°
            // ì •ê·œí™”ëœ ê°’ìœ¼ë¡œ ë¹„êµ
            const matchIndex = gameState.words.findIndex(
                word => word.text.normalize('NFC') === input
            );
            
            if (matchIndex !== -1) {
                // ë‹¨ì–´ íŒŒê´´
                const word = gameState.words[matchIndex];
                
                // íŒŒê´´ íš¨ê³¼
                showDestroyEffect(word.x, word.y);
                
                // ë‹¨ì–´ ì œê±°
                word.destroy();
                gameState.words.splice(matchIndex, 1);
                
                // ì ìˆ˜ ì¶”ê°€
                const points = input.length * GAME_CONFIG.SCORE_PER_CHAR;
                addScore(points);
                
                // ì…ë ¥ì°½ ì´ˆê¸°í™”
                elements.typingInput.value = '';
            }
        }

        // íŒŒê´´ íš¨ê³¼ í‘œì‹œ
        function showDestroyEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'destroy-effect';
            effect.textContent = 'íŒŒê´´! ğŸ’¥';
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            elements.gameArea.appendChild(effect);
            
            setTimeout(() => {
                if (effect.parentNode) {
                    effect.parentNode.removeChild(effect);
                }
            }, 500);
        }

        // ì ìˆ˜ ì¶”ê°€
        function addScore(points) {
            gameState.score += points;
            elements.scoreDisplay.textContent = gameState.score.toLocaleString();
        }

        // ==========================================
        // Phase 5: ê²Œì„ ìƒíƒœ ê´€ë¦¬
        // ==========================================
        
        // ê²Œì„ ë£¨í”„
        function gameLoop(timestamp) {
            if (!gameState.isPlaying) return;
            
            // 1. ëª¨ë“  ë‹¨ì–´ ì—…ë°ì´íŠ¸
            updateWords();
            
            // 2. ë°”ë‹¥ ì¶©ëŒ ì²´í¬
            checkBottomCollision();
            
            // 3. ìƒˆ ë‹¨ì–´ ìƒì„±
            let spawnInterval;
            switch(gameState.difficulty) {
                case 'easy': spawnInterval = GAME_CONFIG.SPAWN_INTERVAL_EASY; break;
                case 'hard': spawnInterval = GAME_CONFIG.SPAWN_INTERVAL_HARD; break;
                default: spawnInterval = GAME_CONFIG.SPAWN_INTERVAL_MEDIUM;
            }
            
            if (timestamp - gameState.lastSpawnTime > spawnInterval) {
                spawnWord();
                gameState.lastSpawnTime = timestamp;
            }
            
            // 4. ë‹¤ìŒ í”„ë ˆì„ ìš”ì²­
            gameState.animationId = requestAnimationFrame(gameLoop);
        }

        // ê²Œì„ ì‹œì‘
        function startGame() {
            if (gameState.isPlaying) return;
            
            // ì´ˆê¸°í™”
            gameState.isPlaying = true;
            gameState.score = 0;
            gameState.lives = gameSettings.initialLives;
            gameState.level = 1;                    // ë ˆë²¨ ì´ˆê¸°í™”
            gameState.baseSpeed = 1.0;              // ê¸°ë³¸ ì†ë„ ì´ˆê¸°í™”
            gameState.currentSpeedMultiplier = 1.0; // ì†ë„ ë°°ìœ¨ ì´ˆê¸°í™”
            gameState.words = [];
            gameState.lastSpawnTime = 0;
            gameState.difficulty = elements.difficulty.value;
            
            // UI ì—…ë°ì´íŠ¸
            elements.scoreDisplay.textContent = '0';
            updateLivesDisplay();
            elements.typingInput.disabled = false;
            elements.typingInput.value = '';
            elements.typingInput.focus();
            elements.startBtn.style.display = 'none';
            elements.restartBtn.style.display = 'none';
            elements.difficulty.disabled = true;
            
            // ê²Œì„ì˜¤ë²„ í™”ë©´ ìˆ¨ê¸°ê¸°
            elements.gameOverScreen.style.display = 'none';
            
            // ê²Œì„ ë£¨í”„ ì‹œì‘
            gameState.animationId = requestAnimationFrame(gameLoop);
        }

        // ê²Œì„ì˜¤ë²„
        function gameOver() {
            gameState.isPlaying = false;
            
            if (gameState.animationId) {
                cancelAnimationFrame(gameState.animationId);
            }
            
            // ì…ë ¥ì°½ ë¹„í™œì„±í™”
            elements.typingInput.disabled = true;
            
            // ëª¨ë“  ë‹¨ì–´ ì œê±°
            gameState.words.forEach(word => word.destroy());
            gameState.words = [];
            
            // ê²Œì„ì˜¤ë²„ í™”ë©´ í‘œì‹œ
            elements.finalScore.textContent = gameState.score.toLocaleString();
            elements.gameOverScreen.style.display = 'flex';
            elements.restartBtn.style.display = 'inline-block';
            elements.difficulty.disabled = false;
        }

        // ê²Œì„ ì¬ì‹œì‘
        function resetGame() {
            // ëª¨ë“  ë‹¨ì–´ ì œê±°
            gameState.words.forEach(word => word.destroy());
            gameState.words = [];
            
            // ê²Œì„ì˜¤ë²„ í™˜ë©´ ìˆ¨ê¸°ê¸°
            elements.gameOverScreen.style.display = 'none';
            
            // ê²Œì„ ì‹œì‘
            startGame();
        }

        // ==========================================
        // Phase 6: ì´ë²¤íŠ¸ ì—°ê²°
        // ==========================================
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ì…ë ¥ ì´ë²¤íŠ¸ (Enter í‚¤)
            elements.typingInput.addEventListener('keydown', handleInput);
            
            // ê²Œì„ ì˜ì—­ í´ë¦­ ì‹œ ì…ë ¥ì°½ í¬ì»¤ìŠ¤
            elements.gameArea.addEventListener('click', () => {
                if (gameState.isPlaying) {
                    elements.typingInput.focus();
                }
            });
        }

        // ì´ˆê¸° ì„¤ì •ê°’ UI ì—…ë°ì´íŠ¸
        elements.currentSpeed.textContent = gameSettings.wordSpeed;
        elements.currentLives.textContent = gameSettings.initialLives;

        // ì´ˆê¸°í™”
        setupEventListeners();

        // CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                75% { transform: translateX(10px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
