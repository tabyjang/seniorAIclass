# 온라인 포토 앨범 체크리스트

**작성일:** 2026-02-04
**상태:** 디버깅 중 - URL 라우팅 문제 수정 완료

---

## 🔧 발견된 문제 및 수정 내역

### 문제 1: 모달이 열리지 않음 ✅ 해결
- **원인:** CSS에 `.modal.active` 스타일만 있고, JS는 `.show` 클래스 사용
- **해결:** components.css에 `.modal.show` 스타일 추가

### 문제 2: CONFIG 정의 안됨 ✅ 해결
- **원인:** `file://` 프로토콜로 열면 외부 JS 로드 불가
- **해결:** Live Server 또는 `npx serve` 사용 필수

### 문제 3: supabase 변수 중복 선언 ✅ 해결
- **원인:** config.js와 HTML 둘 다 `let supabase` 선언
- **해결:** config.js는 CONFIG만 정의, HTML에서 `var db` 사용

### 문제 4: 갤러리 페이지로 이동 후 바로 돌아옴 ✅ 해결
- **원인1:** index.html이 기본 페이지로 처리되어 쿼리 파라미터 손실
- **원인2:** `npx serve`의 clean URLs 기능이 `.html` 제거하며 파라미터 손실
- **해결:**
  1. index.html → gallery.html로 이름 변경
  2. 쿼리 파라미터(`?album=1`) 대신 hash(`#1`) 사용

```
변경 전: gallery.html?album=1  → serve가 /gallery 로 변환, 파라미터 손실
변경 후: gallery.html#1       → hash는 유지됨
```

---

## 1. 설정 파일

### config.js ✅
- [x] SUPABASE_URL 설정
- [x] SUPABASE_ANON_KEY 설정
- [x] STORAGE_BUCKET 설정
- [x] MAX_FILE_SIZE 설정 (10MB)

### 보안 설정 ✅
- [x] .gitignore에 config.js 포함
- [x] config.example.js 템플릿 제공
- [x] .env.example 제공

---

## 2. 앨범 목록 페이지 (albums.html) ✅

### 로그인 ✅
- [x] 로그인 폼 (페이지에 직접 표시, 모달 아님)
- [x] 아이디/비밀번호 입력 폼
- [x] 하드코딩 검증 (test/1234, admin/admin, user/user)
- [x] 로그인 성공 시 localStorage 저장
- [x] 로그인 상태 UI 표시 (사용자명)
- [x] 로그아웃 기능

### 앨범 관리 ✅
- [x] 앨범 목록 조회 (Supabase)
- [x] 앨범 카드 렌더링 (커버 이미지 + 사진 수)
- [x] 새 앨범 만들기 모달
- [x] 앨범 생성 (Supabase)
- [x] 앨범 클릭 시 갤러리로 이동 (hash 방식)

---

## 3. 갤러리 페이지 (gallery.html) ⚠️ 테스트 필요

### 기본
- [x] 로그인 체크 (미로그인 시 albums.html로)
- [x] URL hash에서 album ID 가져오기 (`location.hash`)
- [x] 앨범 정보 표시 (이름, 사진 수)

### 사진 업로드
- [x] 드래그앤드롭 영역
- [x] 파일 선택 (클릭)
- [x] Supabase Storage 업로드
- [x] Supabase DB에 메타데이터 저장
- [x] 업로드 진행률 표시
- [x] 첫 사진 → 앨범 커버로 설정

### 갤러리
- [x] 사진 목록 조회
- [x] 사진 카드 렌더링 (그리드)
- [x] 즐겨찾기 배지 표시

### 라이트박스
- [x] 큰 이미지 표시
- [x] 이전/다음 버튼
- [x] 키보드 (←, →, ESC)
- [x] 사진 카운터 (1/10)
- [x] 즐겨찾기 토글
- [x] 다운로드
- [x] 사진 삭제

### 추가 기능
- [x] 슬라이드쇼 (3초 간격)
- [x] 앨범 삭제 (사진 전체 포함)

---

## 4. CSS ✅

- [x] base.css - 리셋, 기본 스타일
- [x] components.css - 헤더, 버튼, 모달, 토스트
- [x] albums.css - 앨범 카드 그리드
- [x] gallery.css - 갤러리 (inline으로 포함)

---

## 5. 테스트 ⚠️ 진행 중

### 테스트 체크리스트
- [x] albums.html 열기
- [x] 로그인 (test/1234)
- [x] 앨범 목록 표시
- [ ] 앨범 클릭 → 갤러리 이동 (hash 방식)
- [ ] 사진 업로드 (드래그앤드롭)
- [ ] 사진 클릭 → 라이트박스
- [ ] 즐겨찾기 토글
- [ ] 사진 삭제
- [ ] 앨범 삭제

---

## 6. 파일 구조

```
src/
├── albums.html      ← 앨범 목록 (메인 진입점)
├── gallery.html     ← 갤러리 (사진 보기) - 구 index.html
├── css/
│   ├── base.css
│   ├── components.css
│   ├── albums.css
│   └── gallery.css
└── js/
    ├── config.js         ← 실제 키 (gitignore)
    └── config.example.js ← 템플릿
```

---

## 7. 테스트 계정

| 아이디 | 비밀번호 |
|--------|----------|
| test | 1234 |
| admin | admin |
| user | user |

---

## 8. 실행 방법

### 방법 1: Live Server (추천)
```
1. VS Code에서 src/albums.html 열기
2. 우클릭 → "Open with Live Server"
3. 브라우저에서 http://127.0.0.1:5500/src/albums.html
4. 로그인: test / 1234
```

### 방법 2: npx serve
```bash
cd products/online-photo-album/src
npx serve -p 12855
# http://localhost:12855/albums.html
```

**주의:** 파일 직접 열기 (file://) 불가. 반드시 서버 사용.

---

## 9. URL 라우팅 방식

앨범 ID는 **hash**로 전달:
```
albums.html          ← 앨범 목록
gallery.html#1       ← 앨범 ID 1의 갤러리
gallery.html#abc123  ← 앨범 ID abc123의 갤러리
```

gallery.html에서 앨범 ID 읽기:
```javascript
const albumId = location.hash.replace('#', '');
```

---

*최종 수정일: 2026-02-04*
